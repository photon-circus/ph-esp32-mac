# Cargo configuration for ESP32 examples
#
# This configures cargo to build for the ESP32 Xtensa target by default.

[build]
target = "xtensa-esp32-none-elf"

[target.xtensa-esp32-none-elf]
runner = "espflash flash --monitor"
rustflags = [
  # For Xtensa, use GNU ld with -nostartfiles and the esp-hal linkall.x script
  "-C", "link-arg=-nostartfiles",
  "-C", "link-arg=-Wl,-Tlinkall.x",
]

[env]
ESP_IDF_VERSION = "v5.1"
ESP_LOG = "info"

[unstable]
build-std = ["core"]

[alias]
rrun = "run --release"
build-release = "build --release"
ex-build-esp = "build --release --bin esp_hal_integration --features esp-hal-example"
ex-run-esp = "run --release --bin esp_hal_integration --features esp-hal-example"
ex-build-esp-async = "build --release --bin esp_hal_async --features esp-hal-async-example"
ex-run-esp-async = "run --release --bin esp_hal_async --features esp-hal-async-example"
ex-build-smoltcp = "build --release --bin smoltcp_echo --features smoltcp-example"
ex-run-smoltcp = "run --release --bin smoltcp_echo --features smoltcp-example"
ex-build-embassy = "build --release --bin embassy_net --features embassy-net-example"
ex-run-embassy = "run --release --bin embassy_net --features embassy-net-example"
ex-clean = "clean"
